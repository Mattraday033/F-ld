using System.IO;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using TMPro;

public class StatsManager : MonoBehaviour
{
	
	public GameObject nameContentsPanel;
	public GameObject levelContentsPanel;
	public GameObject strContentsPanel;
	public GameObject dexContentsPanel;
	public GameObject wisContentsPanel;
	public GameObject chaContentsPanel;
	public GameObject hpContentsPanel;
	public GameObject xpContentsPanel;
	public GameObject gpContentsPanel;
	public GameObject armorContentsPanel;
	public GameObject partyContentsPanel;
	public GameObject affinityContentsPanel;
	
	public SecondaryStatDisplay secondaryStatDisplay;
	
	private static StatsManager instance;
	
	private void Awake(){
		if(instance != null){
			Debug.LogWarning("Found more than one Stats Manager in the scene.");
		}
		
		instance = this;
	}
	
	public static StatsManager getInstance()
	{
		return instance;
	}
	
	public void updateStatsScreen()
	{
		//not all values are implemented at the moment
		
		nameContentsPanel.GetComponent<TextMeshProUGUI>().text = State.playerStats.getName();
		
		levelContentsPanel.GetComponent<TextMeshProUGUI>().text = "" + State.playerStats.getLevel();
		
		strContentsPanel.GetComponent<TextMeshProUGUI>().text = "" + State.playerStats.getStrength();
		dexContentsPanel.GetComponent<TextMeshProUGUI>().text = "" + State.playerStats.getDexterity();
		wisContentsPanel.GetComponent<TextMeshProUGUI>().text = "" + State.playerStats.getWisdom();
		chaContentsPanel.GetComponent<TextMeshProUGUI>().text = "" + State.playerStats.getCharisma();
		hpContentsPanel.GetComponent<TextMeshProUGUI>().text = State.playerStats.currentHealth + " / " + State.playerStats.getTotalHealth();
		xpContentsPanel.GetComponent<TextMeshProUGUI>().text = "" + State.playerStats.xp;
		gpContentsPanel.GetComponent<TextMeshProUGUI>().text = "" + Purse.getCoinsInPurse();
		armorContentsPanel.GetComponent<TextMeshProUGUI>().text = "" + State.playerStats.getTotalArmorRating();
		partyContentsPanel.GetComponent<TextMeshProUGUI>().text = "1/3"; // not implemented yet
		affinityContentsPanel.GetComponent<TextMeshProUGUI>().text = "" + AffinityManager.getTotalAffinity();
		
	}
	
	public void activateAndPopulateSecondaryStatDisplay(int stat)
	{
		/*
		secondaryStatDisplay.activate();
		
		string[][] titlesAndStats;
		
		switch(stat)
		{
			case 0:
				titlesAndStats = Strength.getAllSecondaryStatsForDisplay();
				break;
			case 1:
				titlesAndStats = Dexterity.getAllSecondaryStatsForDisplay();
				break;
			case 2:
				titlesAndStats = Wisdom.getAllSecondaryStatsForDisplay();
				break;
			case 3:
				titlesAndStats = Charisma.getAllSecondaryStatsForDisplay();
				break;
			default:
				throw new IOException("Unknown stat identifier: " + stat);
		}
		
		secondaryStatDisplay.populatePanels(titlesAndStats[SecondaryStatDisplay.titlesIndex], titlesAndStats[SecondaryStatDisplay.statsIndex]);
		*/
	}
	
}
